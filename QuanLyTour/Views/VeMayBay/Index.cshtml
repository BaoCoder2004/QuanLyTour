@using QuanLyTour.Models.VeMayBay
@model VeMayBayViewModel
@{
    ViewData["Title"] = "Home Page";
}

<div class="search-tabs" id="search-tabs-3">
    <div class="container">
        <div class="row">
            <div class="hidden-xs hidden-sm col-md-12 no-pd-l">
                <div class="welcome-message">
                    <h2>LỰA CHỌN KỲ NGHỈ DƯỠNG TUYỆT VỜI</h2>
                    <p>
                        💥 Bạn đang tìm kiếm một địa điểm du lịch đẹp và thú vị để khám phá? <br />
                        👉 Nhiều địa điểm du lịch đầy màu sắc, nơi bạn có thể tận hưởng thiên nhiên hoang dã, tham gia các hoạt động giải trí và thưởng thức ẩm thực đặc trưng của địa phương
                    <p> ⚡️  Hãy đến và trải nghiệm cùng HANOITOUR của chúng tôi! </p>

                    <div class="search-form-container" style="margin-top:20px">
                        <div class="row">
                            <form id="search-form" class="search-container" method="post" action="@Url.Action("TimKiemVeMayBay", "VeMayBay")">
                                <div class="trip-type">
                                    <label class="trip-option">
                                        <input type="radio" name="tripType" id="round-trip" checked>
                                        <span class="radio-label">Khứ hồi</span>
                                    </label>
                                    <label class="trip-option">
                                        <input type="radio" name="tripType" id="one-way">
                                        <span class="radio-label">Một chiều</span>
                                    </label>
                                </div>

                                <div class="search-form">
                                    <div class="form-row">
                                        <div class="station-selector">
                                            <div class="station-input">
                                                <i class="fa fa-plane"></i>
                                                <div class="station-details">
                                                    <div class="label">Chiều đi</div>
                                                    <select id="from-station" name="GaDi" class="station-dropdown">
                                                        <option value="Hà Nội">Hà Nội (HNO)</option>
                                                        <option value="Sài Gòn">Sài Gòn (SGO)</option>
                                                        <option value="Đà Nẵng">Đà Nẵng (DNA)</option>
                                                        <option value="Huế">Huế (HUE)</option>
                                                        <option value="Nha Trang">Nha Trang (NTR)</option>
                                                        <option value="Phan Thiết">Phan Thiết (PTH)</option>
                                                        <option value="Hải Phòng">Hải Phòng (HPH)</option>
                                                        <option value="Đà Lạt">Đà Lạt (DLT)</option>
                                                        <option value="Vũng Tàu">Vũng Tàu (VTU)</option>
                                                        <option value="Đồng Hới">Đồng Hới (DHI)</option>
                                                        <option value="Lào Cai">Lào Cai (LCA)</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="swap-stations" class="swap-button">
                                                <i class="fa fa-exchange"></i>
                                            </div>

                                            <div class="station-input">
                                                <i class="fa fa-plane"></i>
                                                <div class="station-details">
                                                    <div class="label">Chiều đến</div>
                                                    <select id="to-station" name="GaDen" class="station-dropdown">
                                                        <option value="Sài Gòn">Sài Gòn (SGO)</option>
                                                        <option value="Hà Nội">Hà Nội (HNO)</option>
                                                        <option value="Đà Nẵng">Đà Nẵng (DNA)</option>
                                                        <option value="Huế">Huế (HUE)</option>
                                                        <option value="Nha Trang">Nha Trang (NTR)</option>
                                                        <option value="Phan Thiết">Phan Thiết (PTH)</option>
                                                        <option value="Hải Phòng">Hải Phòng (HPH)</option>
                                                        <option value="Đà Lạt">Đà Lạt (DLT)</option>
                                                        <option value="Vũng Tàu">Vũng Tàu (VTU)</option>
                                                        <option value="Đồng Hới">Đồng Hới (DHI)</option>
                                                        <option value="Lào Cai">Lào Cai (LCA)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="ticket-quantity">
                                            <i class="fa fa-user"></i>
                                            <div class="quantity-details">
                                                <div class="label">Số lượng vé</div>
                                                <div class="quantity-control">
                                                    <button type="button" id="decrease-tickets" class="quantity-btn">-</button>
                                                    <span id="ticket-count-display" class="quantity">1 vé</span>
                                                    <button type="button" id="increase-tickets" class="quantity-btn">+</button>
                                                    <input type="hidden" id="ticket-count" name="SoLuongVe" value="1">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="date-picker">
                                            <div class="date-details">
                                                <label for="depart-date" class="form-label">Ngày đi</label>
                                                <input type="date" id="depart-date" name="NgayDi" class="form-control">
                                            </div>
                                        </div>

                                        <div id="return-date-container" class="date-picker">
                                            <div class="date-details-">
                                                <label for="return-date" class="form-label">Ngày về</label>
                                                <input type="date" id="return-date" name="NgayVe" class="form-control">
                                            </div>
                                        </div>

                                        <button type="submit" class="search-button">TÌM KIẾM</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- end row -->
    </div><!-- end container -->
</div><!-- end search-tabs -->
<!-- Thêm phần đặt vé máy bay -->
<section class="flight-booking-section">
    <div class="container">
        <div class="page-heading white-heading">
            <h2 style="color:black;">DANH MỤC VÉ MÁY BAY</h2>
            <hr class="heading-line" />
        </div><!-- end page-heading -->

        <!-- Row 1 - Three flight cards per row -->
        <div class="flights-grid">
            <!-- Flight 1 -->
            <div class="flight-card">
                <div class="flight-route">
                    <div class="cities">
                        Quy Nhơn <span class="arrow">⇄</span> Hồ Chí Minh
                    </div>
                    <img class="airline-logo" src="/hinhanh/VietravelAirlines.png" alt="Vietravel Airlines">
                </div>
                <div class="flight-dates">
                    <div class="date">07 thg 10</div>
                    <div class="date">08 thg 10</div>
                </div>
                <div class="flight-price">
                    <div class="price">1.376.000 <span class="currency">VND</span></div>
                    <a href="@Url.Action("ChiTietVeMayBay", "VeMayBay", new { chuyenTauID = 1 })" class="view-button">Xem</a>
                </div>
            </div>

            <!-- Flight 2 -->
            <div class="flight-card">
                <div class="flight-route">
                    <div class="cities">
                        Hồ Chí Minh <span class="arrow">⇄</span> Đà Nẵng
                    </div>
                    <img class="airline-logo" src="/hinhanh/VietravelAirlines.png" alt="Vietravel Airlines">
                </div>
                <div class="flight-dates">
                    <div class="date">16 thg 09</div>
                    <div class="date">19 thg 09</div>
                </div>
                <div class="flight-price">
                    <div class="price">1.396.000 <span class="currency">VND</span></div>
                    <a href="@Url.Action("ChiTietVeMayBay", "VeMayBay", new { chuyenTauID = 1 })" class="view-button">Xem</a>
                </div>
            </div>

            <!-- Flight 3 -->
            <div class="flight-card">
                <div class="flight-route">
                    <div class="cities">
                        Hà Nội <span class="arrow">⇄</span> Đà Nẵng
                    </div>
                    <img class="airline-logo" src="~/hinhanh/VietravelAirlines.png" alt="Vietravel Airlines">
                </div>
                <div class="flight-dates">
                    <div class="date">09 thg 09</div>
                    <div class="date">18 thg 09</div>
                </div>
                <div class="flight-price">
                    <div class="price">1.504.000 <span class="currency">VND</span></div>
                    <a href="@Url.Action("ChiTietVeMayBay", "VeMayBay", new { chuyenTauID = 1 })" class="view-button">Xem</a>
                </div>
            </div>

        </div>
    </div>
</section>

<script>
       document.addEventListener('DOMContentLoaded', function() {
        // Thiết lập ngày mặc định cho lịch
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // Swap stations functionality
        const swapButton = document.getElementById('swap-stations');
        const fromStation = document.getElementById('from-station');
        const toStation = document.getElementById('to-station');

        if (swapButton && fromStation && toStation) {
            swapButton.addEventListener('click', function() {
                const tempValue = fromStation.value;
                fromStation.value = toStation.value;
                toStation.value = tempValue;
            });
        }

        // Show/hide return date based on trip type
        const roundTrip = document.getElementById('round-trip');
        const oneWay = document.getElementById('one-way');
        const returnDateContainer = document.getElementById('return-date-container');
        const returnDateInput = document.getElementById('return-date');

        if (roundTrip && oneWay && returnDateContainer && returnDateInput) {
            // Set initial state
            if (oneWay.checked) {
                returnDateContainer.style.display = 'none';
            }

            roundTrip.addEventListener('change', function() {
                returnDateContainer.style.display = 'block';
                if (!returnDateInput.value) {
                    const today = new Date();
                    const tomorrow = new Date(today);
                    tomorrow.setDate(today.getDate() + 1);
                    returnDateInput.value = formatDate(tomorrow);
                }
            });

            oneWay.addEventListener('change', function() {
                returnDateContainer.style.display = 'none';
            });
        }

        // Ticket quantity control
        const decreaseBtn = document.getElementById('decrease-tickets');
        const increaseBtn = document.getElementById('increase-tickets');
        const ticketCount = document.getElementById('ticket-count');
        const ticketCountDisplay = document.getElementById('ticket-count-display');

        if (decreaseBtn && increaseBtn && ticketCount && ticketCountDisplay) {
            decreaseBtn.addEventListener('click', function(e) {
                e.preventDefault();
                let count = parseInt(ticketCount.value);
                if (count > 1) {
                    count--;
                    ticketCount.value = count;
                    ticketCountDisplay.textContent = count + ' vé';
                }
            });

            increaseBtn.addEventListener('click', function(e) {
                e.preventDefault();
                let count = parseInt(ticketCount.value);
                if (count < 10) {
                    count++;
                    ticketCount.value = count;
                    ticketCountDisplay.textContent = count + ' vé';
                }
            });
        }

        // Set default dates
        const departDate = document.getElementById('depart-date');
        if (departDate && !departDate.value) {
            departDate.value = formatDate(new Date());
        }
    });
</script>